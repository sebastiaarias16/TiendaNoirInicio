{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\TiendaNoirInicio\\\\tienda-noir-frontend\\\\src\\\\pages\\\\Checkout.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { createOrder, fetchCartItems } from '../api/api';\nimport { getUser } from '../api/auth';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Checkout = ({\n  clearCart\n}) => {\n  _s();\n  const [cartItems, setCartItems] = useState([]);\n  const [message, setMessage] = useState('');\n  const [paymentMethod, setPaymentMethod] = useState('online');\n  const [city, setCity] = useState('');\n  const [orderId, setOrderId] = useState(null); // Ahora sí se define en el estado\n  const [user, setUser] = useState(null);\n\n  // 📌 Cargar los productos del carrito desde el backend\n  useEffect(() => {\n    const checkUser = async () => {\n      const loggedUser = await getUser();\n      setUser(loggedUser);\n    };\n    checkUser();\n    const loadCartItems = async () => {\n      try {\n        const response = await fetchCartItems();\n        setCartItems(response.map(product => {\n          var _product$tallas, _product$colores;\n          return {\n            ...product,\n            selectedSize: ((_product$tallas = product.tallas) === null || _product$tallas === void 0 ? void 0 : _product$tallas[0]) || 'M',\n            selectedColor: ((_product$colores = product.colores) === null || _product$colores === void 0 ? void 0 : _product$colores[0]) || 'Negro',\n            quantity: 1\n          };\n        }));\n      } catch (error) {\n        console.error('❌ Error al obtener productos:', error);\n      }\n    };\n    loadCartItems();\n  }, []);\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDD11 Debes iniciar sesi\\xF3n para comprar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"./Login\",\n        children: \"Iniciar Sesi\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), \" | \", /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"./Register\",\n        children: \"Registrarse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 48\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/Login\",\n          children: \"Iniciar Sesi\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), \" | \", /*#__PURE__*/_jsxDEV(\"li\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/Register\",\n          children: \"Registrarse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 64\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 60\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this);\n  }\n\n  // 📌 Actualizar valores del carrito\n  const updateCartItem = (productId, updates) => {\n    setCartItems(cartItems.map(item => item._id === productId ? {\n      ...item,\n      ...updates\n    } : item));\n  };\n  const handleCheckout = async () => {\n    const user = await getUser();\n    if (!user) return alert('Debes iniciar sesión para comprar');\n    if (cartItems.length === 0) {\n      setMessage('❌ El carrito está vacío.');\n      return;\n    }\n    if (paymentMethod === \"contra_entrega\" && city.toLowerCase() !== \"bogotá\") {\n      alert(\"⚠️ El pago contra entrega solo está disponible en Bogotá.\");\n      return;\n    }\n    const orderData = {\n      userId: user._id,\n      products: cartItems.map(item => ({\n        productId: item._id,\n        quantity: item.quantity,\n        talla: item.selectedSize,\n        color: item.selectedColor\n      })),\n      total: cartItems.reduce((acc, item) => acc + item.precio * item.quantity, 0),\n      paymentMethod,\n      city\n    };\n    try {\n      console.log('🛒 Enviando orden a la API:', orderData);\n      const response = await createOrder(orderData);\n      setOrderId(response.order._id);\n      setMessage(`✅ Pedido generado: ${response.order._id}`);\n      clearCart();\n    } catch (error) {\n      var _error$response, _error$response2, _error$response2$data;\n      console.error('❌ Error en la compra:', ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n      setMessage(`❌ Error: ${((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || \"No se pudo procesar la compra.\"}`);\n    }\n  };\n  const handlePayment = async () => {\n    const user = await getUser();\n    if (!user) return alert('Debes iniciar sesión para comprar');\n    try {\n      const orderData = {\n        userEmail: user.email,\n        productos: cartItems.map(item => ({\n          nombre: item.nombre,\n          quantity: item.quantity,\n          precio: item.precio\n        }))\n      };\n      const response = await axios.post('http://localhost:3000/api/payment/create-payment', orderData);\n      window.location.href = response.data.url; // Redirigir a MercadoPago\n    } catch (error) {\n      console.error(\"❌ Error en el pago:\", error);\n      setMessage(\"❌ Error al procesar el pago.\");\n    }\n  };\n  const generateInvoice = async () => {\n    if (!orderId) return alert('No hay orden para generar factura.');\n    try {\n      const response = await fetch(`http://localhost:3000/api/invoice/generate-invoice/${orderId}`);\n      const data = await response.json();\n      if (data.filePath) {\n        window.open(`http://localhost:3000/${data.filePath}`);\n      }\n    } catch (error) {\n      console.error('❌ Error al generar la factura:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uD83D\\uDED2 Carrito de Compras\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this), cartItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No hay productos en el carrito\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n        children: cartItems.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [item.nombre, \" - $\", item.precio, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Talla:\", /*#__PURE__*/_jsxDEV(\"select\", {\n              value: item.selectedSize,\n              onChange: e => updateCartItem(item._id, {\n                selectedSize: e.target.value\n              }),\n              children: item.tallas.map(size => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: size,\n                children: size\n              }, size, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 46\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Color:\", /*#__PURE__*/_jsxDEV(\"select\", {\n              value: item.selectedColor,\n              onChange: e => updateCartItem(item._id, {\n                selectedColor: e.target.value\n              }),\n              children: item.colores.map(color => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: color,\n                children: color\n              }, color, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 48\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Cantidad:\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: item.quantity,\n              onChange: e => {\n                const newQuantity = Math.max(1, parseInt(e.target.value)); // Evitar valores negativos\n                updateCartItem(item._id, {\n                  quantity: newQuantity\n                });\n              },\n              min: \"1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setCartItems(cartItems.filter(i => i._id !== item._id)),\n            children: \"Eliminar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 17\n          }, this)]\n        }, item._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Ciudad:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: city,\n          onChange: e => setCity(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"M\\xE9todo de Pago:\", /*#__PURE__*/_jsxDEV(\"select\", {\n          value: paymentMethod,\n          onChange: e => setPaymentMethod(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"online\",\n            children: \"Pago en L\\xEDnea\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"contra_entrega\",\n            children: \"Pago Contra Entrega\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleCheckout,\n        children: \"\\uD83D\\uDED2 Finalizar Compra\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 11\n      }, this), paymentMethod === \"online\" && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handlePayment,\n        children: \"\\uD83D\\uDCB3 Pagar con MercadoPago\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true), orderId && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: generateInvoice,\n      children: \"\\uD83D\\uDCC4 Descargar Factura\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 9\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 5\n  }, this);\n};\n_s(Checkout, \"b5o+gm18cDuzEop4Zx5E+ZylcC4=\");\n_c = Checkout;\nexport default Checkout;\nvar _c;\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"names":["useState","useEffect","createOrder","fetchCartItems","getUser","axios","Link","jsxDEV","_jsxDEV","Fragment","_Fragment","Checkout","clearCart","_s","cartItems","setCartItems","message","setMessage","paymentMethod","setPaymentMethod","city","setCity","orderId","setOrderId","user","setUser","checkUser","loggedUser","loadCartItems","response","map","product","_product$tallas","_product$colores","selectedSize","tallas","selectedColor","colores","quantity","error","console","children","fileName","_jsxFileName","lineNumber","columnNumber","href","to","updateCartItem","productId","updates","item","_id","handleCheckout","alert","length","toLowerCase","orderData","userId","products","talla","color","total","reduce","acc","precio","log","order","_error$response","_error$response2","_error$response2$data","data","handlePayment","userEmail","email","productos","nombre","post","window","location","url","generateInvoice","fetch","json","filePath","open","value","onChange","e","target","size","type","newQuantity","Math","max","parseInt","min","onClick","filter","i","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/TiendaNoirInicio/tienda-noir-frontend/src/pages/Checkout.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { createOrder, fetchCartItems } from '../api/api';\r\nimport { getUser } from '../api/auth';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Checkout = ({ clearCart }) => {\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [message, setMessage] = useState('');\r\n  const [paymentMethod, setPaymentMethod] = useState('online');\r\n  const [city, setCity] = useState('');\r\n  const [orderId, setOrderId] = useState(null); // Ahora sí se define en el estado\r\n  const [user, setUser] = useState(null);\r\n\r\n\r\n  // 📌 Cargar los productos del carrito desde el backend\r\n  useEffect(() => {\r\n\r\n    const checkUser = async () => {\r\n      const loggedUser = await getUser();\r\n      setUser(loggedUser);\r\n    };\r\n    checkUser();\r\n\r\n\r\n    const loadCartItems = async () => {\r\n      try {\r\n        const response = await fetchCartItems();\r\n        setCartItems(response.map(product => ({\r\n          ...product,\r\n          selectedSize: product.tallas?.[0] || 'M',\r\n          selectedColor: product.colores?.[0] || 'Negro',\r\n          quantity: 1,\r\n        })));\r\n      } catch (error) {\r\n        console.error('❌ Error al obtener productos:', error);\r\n      }\r\n    };\r\n\r\n    loadCartItems();\r\n  }, []);\r\n\r\n  if (!user) {\r\n    return (\r\n      <div>\r\n        <h2>🔑 Debes iniciar sesión para comprar</h2>\r\n        <a href=\"./Login\">Iniciar Sesión</a> | <a href=\"./Register\">Registrarse</a>\r\n        <li><Link to=\"/Login\">Iniciar Sesión</Link></li> | <li><Link to=\"/Register\">Registrarse</Link></li>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // 📌 Actualizar valores del carrito\r\n  const updateCartItem = (productId, updates) => {\r\n    setCartItems(cartItems.map(item =>\r\n      item._id === productId ? { ...item, ...updates } : item\r\n    ));\r\n  };\r\n\r\n  const handleCheckout = async () => {\r\n    const user = await getUser();\r\n    if (!user) return alert('Debes iniciar sesión para comprar');\r\n\r\n    if (cartItems.length === 0) {\r\n      setMessage('❌ El carrito está vacío.');\r\n      return;\r\n    }\r\n\r\n    if (paymentMethod === \"contra_entrega\" && city.toLowerCase() !== \"bogotá\") {\r\n      alert(\"⚠️ El pago contra entrega solo está disponible en Bogotá.\");\r\n      return;\r\n    }\r\n\r\n    const orderData = {\r\n      userId: user._id,\r\n      products: cartItems.map(item => ({\r\n        productId: item._id,\r\n        quantity: item.quantity,\r\n        talla: item.selectedSize,\r\n        color: item.selectedColor,\r\n      })),\r\n      total: cartItems.reduce((acc, item) => acc + item.precio * item.quantity, 0),\r\n      paymentMethod,\r\n      city\r\n    };\r\n\r\n    try {\r\n      console.log('🛒 Enviando orden a la API:', orderData);\r\n      const response = await createOrder(orderData);\r\n      setOrderId(response.order._id);\r\n      setMessage(`✅ Pedido generado: ${response.order._id}`);\r\n      clearCart();\r\n    } catch (error) {\r\n      console.error('❌ Error en la compra:', error.response?.data || error.message);\r\n      setMessage(`❌ Error: ${error.response?.data?.error || \"No se pudo procesar la compra.\"}`);\r\n    }\r\n  };\r\n\r\n  const handlePayment = async () => {\r\n    const user = await getUser();\r\n    if (!user) return alert('Debes iniciar sesión para comprar');\r\n\r\n    try {\r\n      const orderData = {\r\n        userEmail: user.email,\r\n        productos: cartItems.map(item => ({\r\n          nombre: item.nombre,\r\n          quantity: item.quantity,\r\n          precio: item.precio\r\n        }))\r\n      };\r\n\r\n      const response = await axios.post('http://localhost:3000/api/payment/create-payment', orderData);\r\n      window.location.href = response.data.url; // Redirigir a MercadoPago\r\n    } catch (error) {\r\n      console.error(\"❌ Error en el pago:\", error);\r\n      setMessage(\"❌ Error al procesar el pago.\");\r\n    }\r\n  };\r\n\r\n  const generateInvoice = async () => {\r\n    if (!orderId) return alert('No hay orden para generar factura.');\r\n\r\n    try {\r\n      const response = await fetch(`http://localhost:3000/api/invoice/generate-invoice/${orderId}`);\r\n      const data = await response.json();\r\n      if (data.filePath) {\r\n        window.open(`http://localhost:3000/${data.filePath}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('❌ Error al generar la factura:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>🛒 Carrito de Compras</h2>\r\n      {cartItems.length === 0 ? (\r\n        <p>No hay productos en el carrito</p>\r\n      ) : (\r\n        <>\r\n          <ul>\r\n            {cartItems.map(item => (\r\n              <li key={item._id}>\r\n                <p>{item.nombre} - ${item.precio} </p>\r\n                <label>\r\n                  Talla:\r\n                  <select value={item.selectedSize} onChange={(e) => updateCartItem(item._id, { selectedSize: e.target.value })}>\r\n                    {item.tallas.map(size => <option key={size} value={size}>{size}</option>)}\r\n                  </select>\r\n                </label>\r\n                <label>\r\n                  Color:\r\n                  <select value={item.selectedColor} onChange={(e) => updateCartItem(item._id, { selectedColor: e.target.value })}>\r\n                    {item.colores.map(color => <option key={color} value={color}>{color}</option>)}\r\n                  </select>\r\n                </label>\r\n                <label>\r\n                  Cantidad:\r\n                  <input\r\n                    type=\"number\"\r\n                    value={item.quantity}\r\n                    onChange={(e) => {\r\n                      const newQuantity = Math.max(1, parseInt(e.target.value)); // Evitar valores negativos\r\n                      updateCartItem(item._id, { quantity: newQuantity });\r\n                    }}\r\n                    min=\"1\"\r\n                  />\r\n                </label>\r\n                <button onClick={() => setCartItems(cartItems.filter(i => i._id !== item._id))}>Eliminar</button>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n\r\n          <label>\r\n            Ciudad:\r\n            <input type=\"text\" value={city} onChange={(e) => setCity(e.target.value)} />\r\n          </label>\r\n\r\n          <label>\r\n            Método de Pago:\r\n            <select value={paymentMethod} onChange={(e) => setPaymentMethod(e.target.value)}>\r\n              <option value=\"online\">Pago en Línea</option>\r\n              <option value=\"contra_entrega\">Pago Contra Entrega</option>\r\n            </select>\r\n          </label>\r\n\r\n          <button onClick={handleCheckout}>🛒 Finalizar Compra</button>\r\n          {paymentMethod === \"online\" && (\r\n            <button onClick={handlePayment}>💳 Pagar con MercadoPago</button>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {orderId && (\r\n        <button onClick={generateInvoice}>📄 Descargar Factura</button>\r\n      )}\r\n      {message && <p>{message}</p>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}